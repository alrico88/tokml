{"version":3,"sources":["../src/index.js","../src/lib/xml-escape.js","../src/lib/strxml.js","../src/helpers/geometry.js","../src/helpers/style.js","../src/helpers/general.js"],"sourcesContent":["import esc from './lib/xml-escape';\nimport { tag } from './lib/strxml';\nimport { geometry } from './helpers/geometry';\nimport {\n  markerStyle,\n  hashStyle,\n  removeMarkerStyle,\n  hasPolygonAndLineStyle,\n  polygonAndLineStyle,\n  hasMarkerStyle,\n  removePolygonAndLineStyle,\n} from './helpers/style';\nimport { pairs } from './helpers/general';\nimport { defu } from 'defu';\n\nfunction documentName(options) {\n  return options.documentName !== undefined\n    ? tag('name', options.documentName)\n    : '';\n}\n\nfunction documentDescription(options) {\n  return options.documentDescription !== undefined\n    ? tag('description', options.documentDescription)\n    : '';\n}\nfunction name(_, options) {\n  return _[options.name] ? tag('name', esc(_[options.name])) : '';\n}\n\nfunction description(_, options) {\n  return _[options.description]\n    ? tag('description', esc(_[options.description]))\n    : '';\n}\n\nfunction timestamp(_, options) {\n  return _[options.timestamp]\n    ? tag('TimeStamp', tag('when', esc(_[options.timestamp])))\n    : '';\n}\n\n// ## Data\nfunction data(_) {\n  return tag(\n    'Data',\n    { name: _[0] },\n    tag(\n      'value',\n      {},\n      esc(_[1] ? (typeof _[1] === 'string' ? _[1] : JSON.stringify(_[1])) : '')\n    )\n  );\n}\n\nfunction extendeddata(_) {\n  return tag('ExtendedData', {}, pairs(_).map(data).join(''));\n}\n\nfunction feature(options, styleHashesArray) {\n  return function (_) {\n    if (!_.properties || !geometry.valid(_.geometry)) return '';\n    var geometryString = geometry.any(_.geometry);\n    if (!geometryString) return '';\n\n    var styleDefinition = '',\n      styleReference = '';\n    if (options.simplestyle) {\n      var styleHash = hashStyle(_.properties);\n      if (styleHash) {\n        if (geometry.isPoint(_.geometry) && hasMarkerStyle(_.properties)) {\n          if (styleHashesArray.indexOf(styleHash) === -1) {\n            styleDefinition = markerStyle(\n              options.iconBaseUrl,\n              _.properties,\n              styleHash\n            );\n            styleHashesArray.push(styleHash);\n          }\n          styleReference = tag('styleUrl', '#' + styleHash);\n          removeMarkerStyle(_.properties);\n        } else if (\n          (geometry.isPolygon(_.geometry) || geometry.isLine(_.geometry)) &&\n          hasPolygonAndLineStyle(_.properties)\n        ) {\n          if (styleHashesArray.indexOf(styleHash) === -1) {\n            styleDefinition = polygonAndLineStyle(_.properties, styleHash);\n            styleHashesArray.push(styleHash);\n          }\n          styleReference = tag('styleUrl', '#' + styleHash);\n          removePolygonAndLineStyle(_.properties);\n        }\n        // Note that style of GeometryCollection / MultiGeometry is not supported\n      }\n    }\n\n    var attributes = {};\n    if (_.id) attributes.id = _.id.toString();\n    return (\n      styleDefinition +\n      tag(\n        'Placemark',\n        attributes,\n        name(_.properties, options) +\n          description(_.properties, options) +\n          extendeddata(_.properties) +\n          timestamp(_.properties, options) +\n          geometryString +\n          styleReference\n      )\n    );\n  };\n}\n\nfunction root(_, options) {\n  if (!_.type) return '';\n  var styleHashesArray = [];\n\n  switch (_.type) {\n    case 'FeatureCollection':\n      if (!_.features) return '';\n      return _.features.map(feature(options, styleHashesArray)).join('');\n    case 'Feature':\n      return feature(options, styleHashesArray)(_);\n    default:\n      return feature(\n        options,\n        styleHashesArray\n      )({\n        type: 'Feature',\n        geometry: _,\n        properties: {},\n      });\n  }\n}\n\n/**\n * @typedef KMLOptions\n * @property {string} [documentName]\n * @property {string} [documentDescription]\n * @property {string} [name=\"name\"]\n * @property {string} [description=\"description\"]\n * @property {string} [simplestyle=false]\n * @property {string} [iconBaseUrl=\"https://api.tiles.mapbox.com/v3/marker/\"]\n * @property {string} [timestamp=\"timestamp\"]\n */\n\nconst defaultOptions = {\n  documentName: undefined,\n  documentDescription: undefined,\n  name: 'name',\n  description: 'description',\n  simplestyle: false,\n  iconBaseUrl: 'https://api.tiles.mapbox.com/v3/marker/',\n  timestamp: 'timestamp',\n};\n\n/**\n * Convert GeoJSON to KML\n *\n * @export\n * @param {Object} geojson\n * @param {KMLOptions} options\n * @return {string}\n */\nexport function toKML(geojson, options) {\n  options = defu(options, defaultOptions);\n\n  return (\n    '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' +\n    tag(\n      'kml',\n      { xmlns: 'http://www.opengis.net/kml/2.2' },\n      tag(\n        'Document',\n        documentName(options) +\n          documentDescription(options) +\n          root(geojson, options)\n      )\n    )\n  );\n}\n","// originally from https://github.com/miketheprogrammer/xml-escape\n\nexport default function (string, ignore) {\n  const escapeMap = {\n    '>': '&gt;',\n    '<': '&lt;',\n    \"'\": '&apos;',\n    '\"': '&quot;',\n    '&': '&amp;',\n  };\n\n  var pattern;\n\n  if (string === null || string === undefined) return;\n\n  // eslint-disable-next-line no-useless-escape\n  ignore = (ignore || '').replace(/[^&\"<>\\']/g, '');\n  pattern = '([&\"<>\\'])'.replace(new RegExp('[' + ignore + ']', 'g'), '');\n\n  return string.replace(new RegExp(pattern, 'g'), function (str, item) {\n    return escapeMap[item];\n  });\n}\n","// originally from from https://github.com/mapbox/strxml\n\nimport esc from './xml-escape';\n\n/**\n * @param {array} _ an array of attributes\n * @returns {string}\n */\nexport function attr(attributes) {\n  if (!Object.keys(attributes).length) return '';\n  return (\n    ' ' +\n    Object.keys(attributes)\n      .map(function (key) {\n        return key + '=\"' + esc(attributes[key]) + '\"';\n      })\n      .join(' ')\n  );\n}\n\n/**\n * @param {string} el element name\n * @param {array} attributes array of pairs\n * @returns {string}\n */\nexport function tagClose(el, attributes) {\n  return '<' + el + attr(attributes) + '/>';\n}\n\n/**\n * @param {string} el element name\n * @param {string} contents innerXML\n * @param {array} attributes array of pairs\n * @returns {string}\n */\nexport function tag(el, attributes, contents) {\n  if (Array.isArray(attributes) || typeof attributes === 'string') {\n    contents = attributes;\n    attributes = {};\n  }\n  if (Array.isArray(contents))\n    contents =\n      '\\n' +\n      contents\n        .map(function (content) {\n          return '  ' + content;\n        })\n        .join('\\n') +\n      '\\n';\n  return '<' + el + attr(attributes) + '>' + contents + '</' + el + '>';\n}\n","import { tag } from '../lib/strxml';\n\nfunction linearring(_) {\n  return _.map(function (cds) {\n    return cds.join(',');\n  }).join(' ');\n}\n\nexport const geometry = {\n  Point: function (_) {\n    return tag('Point', tag('coordinates', _.coordinates.join(',')));\n  },\n  LineString: function (_) {\n    return tag('LineString', tag('coordinates', linearring(_.coordinates)));\n  },\n  Polygon: function (_) {\n    if (!_.coordinates.length) return '';\n    var outer = _.coordinates[0],\n      inner = _.coordinates.slice(1),\n      outerRing = tag(\n        'outerBoundaryIs',\n        tag('LinearRing', tag('coordinates', linearring(outer)))\n      ),\n      innerRings = inner\n        .map(function (i) {\n          return tag(\n            'innerBoundaryIs',\n            tag('LinearRing', tag('coordinates', linearring(i)))\n          );\n        })\n        .join('');\n    return tag('Polygon', outerRing + innerRings);\n  },\n  MultiPoint: function (_) {\n    if (!_.coordinates.length) return '';\n    return tag(\n      'MultiGeometry',\n      _.coordinates\n        .map(function (c) {\n          return geometry.Point({ coordinates: c });\n        })\n        .join('')\n    );\n  },\n  MultiPolygon: function (_) {\n    if (!_.coordinates.length) return '';\n    return tag(\n      'MultiGeometry',\n      _.coordinates\n        .map(function (c) {\n          return geometry.Polygon({ coordinates: c });\n        })\n        .join('')\n    );\n  },\n  MultiLineString: function (_) {\n    if (!_.coordinates.length) return '';\n    return tag(\n      'MultiGeometry',\n      _.coordinates\n        .map(function (c) {\n          return geometry.LineString({ coordinates: c });\n        })\n        .join('')\n    );\n  },\n  GeometryCollection: function (_) {\n    return tag('MultiGeometry', _.geometries.map(geometry.any).join(''));\n  },\n  valid: function (_) {\n    return (\n      _ &&\n      _.type &&\n      (_.coordinates ||\n        (_.type === 'GeometryCollection' &&\n          _.geometries &&\n          _.geometries.every(geometry.valid)))\n    );\n  },\n  any: function (_) {\n    if (geometry[_.type]) {\n      return geometry[_.type](_);\n    } else {\n      return '';\n    }\n  },\n  isPoint: function (_) {\n    return _.type === 'Point' || _.type === 'MultiPoint';\n  },\n  isPolygon: function (_) {\n    return _.type === 'Polygon' || _.type === 'MultiPolygon';\n  },\n  isLine: function (_) {\n    return _.type === 'LineString' || _.type === 'MultiLineString';\n  },\n};\n","import { tag } from '../lib/strxml';\n\nexport function hexToKmlColor(hexColor, opacity) {\n  if (typeof hexColor !== 'string') return '';\n\n  hexColor = hexColor.replace('#', '').toLowerCase();\n\n  if (hexColor.length === 3) {\n    hexColor =\n      hexColor[0] +\n      hexColor[0] +\n      hexColor[1] +\n      hexColor[1] +\n      hexColor[2] +\n      hexColor[2];\n  } else if (hexColor.length !== 6) {\n    return '';\n  }\n\n  var r = hexColor[0] + hexColor[1];\n  var g = hexColor[2] + hexColor[3];\n  var b = hexColor[4] + hexColor[5];\n\n  var o = 'ff';\n  if (typeof opacity === 'number' && opacity >= 0.0 && opacity <= 1.0) {\n    o = (opacity * 255).toString(16);\n    if (o.indexOf('.') > -1) o = o.substr(0, o.indexOf('.'));\n    if (o.length < 2) o = '0' + o;\n  }\n\n  return o + b + g + r;\n}\n\nexport function hasMarkerStyle(_) {\n  return !!(_['marker-size'] || _['marker-symbol'] || _['marker-color']);\n}\n\nexport function removeMarkerStyle(_) {\n  delete _['marker-size'];\n  delete _['marker-symbol'];\n  delete _['marker-color'];\n  delete _['marker-shape'];\n}\n\nconst iconSize = tag(\n  'hotSpot',\n  {\n    xunits: 'fraction',\n    yunits: 'fraction',\n    x: '0.5',\n    y: '0.5',\n  },\n  ''\n);\n\nexport function iconUrl(baseUrl, _) {\n  var size = _['marker-size'] || 'medium',\n    symbol = _['marker-symbol'] ? '-' + _['marker-symbol'] : '',\n    color = (_['marker-color'] || '7e7e7e').replace('#', '');\n\n  return baseUrl + 'pin-' + size.charAt(0) + symbol + '+' + color + '.png';\n}\n\nexport function markerStyle(baseUrl, _, styleHash) {\n  return tag(\n    'Style',\n    { id: styleHash },\n    tag('IconStyle', tag('Icon', tag('href', iconUrl(baseUrl, _)))) + iconSize\n  );\n}\n\n// ## Polygon and Line style\nexport function hasPolygonAndLineStyle(_) {\n  for (var key in _) {\n    if (\n      {\n        stroke: true,\n        'stroke-opacity': true,\n        'stroke-width': true,\n        fill: true,\n        'fill-opacity': true,\n      }[key]\n    )\n      return true;\n  }\n}\n\nexport function removePolygonAndLineStyle(_) {\n  delete _['stroke'];\n  delete _['stroke-opacity'];\n  delete _['stroke-width'];\n  delete _['fill'];\n  delete _['fill-opacity'];\n}\n\nexport function polygonAndLineStyle(_, styleHash) {\n  var lineStyle = tag(\n    'LineStyle',\n    tag(\n      'color',\n      hexToKmlColor(_['stroke'], _['stroke-opacity']) || 'ff555555'\n    ) +\n      tag('width', {}, _['stroke-width'] === undefined ? 2 : _['stroke-width'])\n  );\n\n  var polyStyle = '';\n\n  if (_['fill'] || _['fill-opacity']) {\n    polyStyle = tag(\n      'PolyStyle',\n      tag(\n        'color',\n        {},\n        hexToKmlColor(_['fill'], _['fill-opacity']) || '88555555'\n      )\n    );\n  }\n\n  return tag('Style', { id: styleHash }, lineStyle + polyStyle);\n}\n\n// ## Style helpers\nexport function hashStyle(_) {\n  var hash = '';\n\n  if (_['marker-symbol']) hash = hash + 'ms' + _['marker-symbol'];\n  if (_['marker-color'])\n    hash = hash + 'mc' + _['marker-color'].replace('#', '');\n  if (_['marker-size']) hash = hash + 'ms' + _['marker-size'];\n  if (_['stroke']) hash = hash + 's' + _['stroke'].replace('#', '');\n  if (_['stroke-width'])\n    hash = hash + 'sw' + _['stroke-width'].toString().replace('.', '');\n  if (_['stroke-opacity'])\n    hash = hash + 'mo' + _['stroke-opacity'].toString().replace('.', '');\n  if (_['fill']) hash = hash + 'f' + _['fill'].replace('#', '');\n  if (_['fill-opacity'])\n    hash = hash + 'fo' + _['fill-opacity'].toString().replace('.', '');\n\n  return hash;\n}\n","export function pairs(_) {\n  var o = [];\n  for (var i in _) {\n    if (_[i]) {\n      o.push([i, _[i]]);\n    } else {\n      o.push([i, '']);\n    }\n  }\n  return o;\n}\n"],"mappings":"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","names":["src_exports","__export","toKML","__toCommonJS","xml_escape_default","string","ignore","escapeMap","pattern","str","item","attr","attributes","key","xml_escape_default","tag","el","attributes","contents","content","attr","linearring","_","cds","geometry","tag","outer","inner","outerRing","innerRings","i","c","hexToKmlColor","hexColor","opacity","r","g","b","hasMarkerStyle","_","removeMarkerStyle","iconSize","tag","iconUrl","baseUrl","size","symbol","color","markerStyle","styleHash","hasPolygonAndLineStyle","key","removePolygonAndLineStyle","polygonAndLineStyle","lineStyle","polyStyle","hashStyle","hash","pairs","_","o","i","import_defu","documentName","options","tag","documentDescription","name","_","xml_escape_default","description","timestamp","data","extendeddata","pairs","feature","styleHashesArray","geometry","geometryString","styleDefinition","styleReference","styleHash","hashStyle","hasMarkerStyle","markerStyle","removeMarkerStyle","hasPolygonAndLineStyle","polygonAndLineStyle","removePolygonAndLineStyle","attributes","root","defaultOptions","toKML","geojson"]}